{
  "blocks": {
    "block_1": {
      "id": "block_1",
      "type": "start",
      "x": 50,
      "y": 100,
      "message": "üõçÔ∏è –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω!\n\nüì± –£ –Ω–∞—Å –≤—ã –Ω–∞–π–¥–µ—Ç–µ:\n‚Ä¢ –≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫—É\n‚Ä¢ –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã\n‚Ä¢ –ì–∞–¥–∂–µ—Ç—ã\n\n–í—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –∏ –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π!",
      "connections": {
        "input": null,
        "outputs": {
          "default": "block_2"
        }
      }
    },
    "block_2": {
      "id": "block_2",
      "type": "catalog",
      "x": 350,
      "y": 100,
      "source": "json",
      "products": "[{\"name\":\"iPhone 15 Pro\",\"price\":\"99990\",\"description\":\"–¢–∏—Ç–∞–Ω–æ–≤—ã–π –∫–æ—Ä–ø—É—Å, A17 Pro, –∫–∞–º–µ—Ä–∞ 48 –ú–ü\"},{\"name\":\"Samsung Galaxy S24\",\"price\":\"89990\",\"description\":\"Snapdragon 8 Gen 3, AMOLED –¥–∏—Å–ø–ª–µ–π\"},{\"name\":\"AirPods Pro 2\",\"price\":\"24990\",\"description\":\"–ê–∫—Ç–∏–≤–Ω–æ–µ —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ, USB-C\"},{\"name\":\"Xiaomi Watch S2\",\"price\":\"19990\",\"description\":\"AMOLED –¥–∏—Å–ø–ª–µ–π, 12 –¥–Ω–µ–π —Ä–∞–±–æ—Ç—ã\"},{\"name\":\"Logitech MX Master 3S\",\"price\":\"9990\",\"description\":\"–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è –º—ã—à—å –¥–ª—è –ø—Ä–æ—Ñ–∏\"},{\"name\":\"JBL Flip 6\",\"price\":\"12990\",\"description\":\"–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞, IP67, 12 —á–∞—Å–æ–≤\"}]",
      "per_page": 8,
      "connections": {
        "input": "block_1",
        "outputs": {
          "default": "block_3"
        }
      }
    },
    "block_3": {
      "id": "block_3",
      "type": "message",
      "x": 650,
      "y": 100,
      "text": "üì¶ –í—ã –≤—ã–±—Ä–∞–ª–∏: {product_name}\nüí∞ –¶–µ–Ω–∞: {product_price} —Ä—É–±\nüìù {product_description}\n\n‚ú® –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä!",
      "connections": {
        "input": "block_2",
        "outputs": {
          "default": "block_4"
        }
      }
    },
    "block_4": {
      "id": "block_4",
      "type": "inline_keyboard",
      "x": 950,
      "y": 100,
      "message": "–ß—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?",
      "buttons": [
        {
          "text": "üõí –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É",
          "callback_data": "add_to_cart"
        },
        {
          "text": "üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–∞–ª–æ–≥—É",
          "callback_data": "back_to_catalog"
        },
        {
          "text": "üõçÔ∏è –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é",
          "callback_data": "go_to_checkout"
        }
      ],
      "connections": {
        "input": "block_3",
        "outputs": {
          "add_to_cart": "block_5",
          "back_to_catalog": "block_2",
          "go_to_checkout": "block_10"
        }
      }
    },
    "block_5": {
      "id": "block_5",
      "type": "question",
      "x": 1250,
      "y": 100,
      "question": "üî¢ –°–∫–æ–ª—å–∫–æ –µ–¥–∏–Ω–∏—Ü —Ç–æ–≤–∞—Ä–∞ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å?",
      "variable": "quantity",
      "connections": {
        "input": "block_4",
        "outputs": {
          "default": "block_6"
        }
      }
    },
    "block_6": {
      "id": "block_6",
      "type": "cart",
      "x": 1550,
      "y": 100,
      "action": "add",
      "product_id": "product_name",
      "quantity": "quantity",
      "connections": {
        "input": "block_5",
        "outputs": {
          "default": "block_7"
        }
      }
    },
    "block_7": {
      "id": "block_7",
      "type": "cart",
      "x": 1850,
      "y": 100,
      "action": "show",
      "product_id": "",
      "quantity": "",
      "connections": {
        "input": "block_6",
        "outputs": {
          "default": "block_8"
        }
      }
    },
    "block_8": {
      "id": "block_8",
      "type": "inline_keyboard",
      "x": 2150,
      "y": 100,
      "message": "–ß—Ç–æ –¥–∞–ª—å—à–µ?",
      "buttons": [
        {
          "text": "üõçÔ∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏",
          "callback_data": "continue_shopping"
        },
        {
          "text": "‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑",
          "callback_data": "checkout"
        },
        {
          "text": "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É",
          "callback_data": "clear_cart"
        }
      ],
      "connections": {
        "input": "block_7",
        "outputs": {
          "continue_shopping": "block_2",
          "checkout": "block_10",
          "clear_cart": "block_9"
        }
      }
    },
    "block_9": {
      "id": "block_9",
      "type": "cart",
      "x": 2450,
      "y": 300,
      "action": "clear",
      "product_id": "",
      "quantity": "",
      "connections": {
        "input": "block_8",
        "outputs": {
          "default": "block_2"
        }
      }
    },
    "block_10": {
      "id": "block_10",
      "type": "message",
      "x": 50,
      "y": 400,
      "text": "üìù –û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ –æ—Ñ–æ—Ä–º–∏–º –≤–∞—à –∑–∞–∫–∞–∑.\n\n–ú–Ω–µ –Ω—É–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏.",
      "connections": {
        "input": "block_8",
        "outputs": {
          "default": "block_11"
        }
      }
    },
    "block_11": {
      "id": "block_11",
      "type": "order_form",
      "x": 350,
      "y": 400,
      "fields": [
        {
          "type": "name",
          "variable": "customer_name"
        },
        {
          "type": "phone",
          "variable": "customer_phone"
        },
        {
          "type": "address",
          "variable": "customer_address"
        },
        {
          "type": "comment",
          "variable": "customer_comment"
        }
      ],
      "success_message": "‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã.",
      "connections": {
        "input": "block_12",
        "outputs": {
          "default": "block_12"
        }
      }
    },
    "block_12": {
      "id": "block_12",
      "type": "variable",
      "x": 650,
      "y": 400,
      "variable": "delivery_cost",
      "value": "500",
      "connections": {
        "input": "block_11",
        "outputs": {
          "default": "block_13"
        }
      }
    },
    "block_13": {
      "id": "block_13",
      "type": "variable",
      "x": 950,
      "y": 400,
      "variable": "goods_total",
      "value": "25000",
      "connections": {
        "input": "block_12",
        "outputs": {
          "default": "block_14"
        }
      }
    },
    "block_14": {
      "id": "block_14",
      "type": "calculation",
      "x": 1250,
      "y": 400,
      "formula": "{goods_total} + {delivery_cost}",
      "result_variable": "total_amount",
      "connections": {
        "input": "block_13",
        "outputs": {
          "default": "block_15"
        }
      }
    },
    "block_15": {
      "id": "block_15",
      "type": "order_confirm",
      "x": 1550,
      "y": 400,
      "title": "üìã –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞",
      "template": "üë§ –ò–º—è: {customer_name}\nüìû –¢–µ–ª–µ—Ñ–æ–Ω: {customer_phone}\nüìç –ê–¥—Ä–µ—Å: {customer_address}\nüí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {customer_comment}\n\nüí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤: {goods_total} —Ä—É–±\nüöö –î–æ—Å—Ç–∞–≤–∫–∞: {delivery_cost} —Ä—É–±\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\nüí≥ –ò–¢–û–ì–û: {total_amount} —Ä—É–±",
      "show_confirm": true,
      "show_edit": true,
      "show_cancel": false,
      "connections": {
        "input": "block_14",
        "outputs": {
          "confirm_order": "block_16",
          "edit_order": "block_11",
          "cancel_order": null
        }
      }
    },
    "block_16": {
      "id": "block_16",
      "type": "payment",
      "x": 1850,
      "y": 400,
      "title": "–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞",
      "description": "–û–ø–ª–∞—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ –¥–æ—Å—Ç–∞–≤–∫–∏",
      "amount": "total_amount",
      "currency": "RUB",
      "provider_token": "YOUR_PAYMENT_TOKEN",
      "connections": {
        "input": "block_15",
        "outputs": {
          "default": "block_17"
        }
      }
    },
    "block_17": {
      "id": "block_17",
      "type": "database",
      "x": 2150,
      "y": 400,
      "operation": "save",
      "key": "order_{customer_phone}_{timestamp}",
      "data": "customer_name",
      "result_variable": "",
      "connections": {
        "input": "block_16",
        "outputs": {
          "default": "block_18"
        }
      }
    },
    "block_18": {
      "id": "block_18",
      "type": "notification",
      "x": 2450,
      "y": 400,
      "target": "admin",
      "chat_id": "",
      "message": "üîî –ù–û–í–´–ô –ó–ê–ö–ê–ó!\n\nüë§ {customer_name}\nüìû {customer_phone}\nüìç {customer_address}\n\nüí∞ –°—É–º–º–∞: {total_amount} —Ä—É–±",
      "connections": {
        "input": "block_17",
        "outputs": {
          "default": "block_19"
        }
      }
    },
    "block_19": {
      "id": "block_19",
      "type": "message",
      "x": 2750,
      "y": 400,
      "text": "üéâ –°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!\n\n‚úÖ –í–∞—à –∑–∞–∫–∞–∑ ‚Ññ{customer_phone} –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É\n\nüìû –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç\nüöö –î–æ—Å—Ç–∞–≤–∫–∞: 1-2 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è\n\nüí≥ –û–ø–ª–∞—Ç–∞: {total_amount} —Ä—É–±\n\n–î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–∫—É–ø–æ–∫ –Ω–∞–∂–º–∏—Ç–µ /start",
      "connections": {
        "input": "block_18",
        "outputs": {
          "default": null
        }
      }
    }
  },
  "connections": [
    {
      "id": "conn_1",
      "from": "block_1",
      "to": "block_2",
      "fromPort": "default"
    },
    {
      "id": "conn_2",
      "from": "block_2",
      "to": "block_3",
      "fromPort": "default"
    },
    {
      "id": "conn_3",
      "from": "block_3",
      "to": "block_4",
      "fromPort": "default"
    },
    {
      "id": "conn_4",
      "from": "block_4",
      "to": "block_5",
      "fromPort": "default"
    },
    {
      "id": "conn_5",
      "from": "block_5",
      "to": "block_6",
      "fromPort": "default"
    },
    {
      "id": "conn_6",
      "from": "block_6",
      "to": "block_7",
      "fromPort": "add_to_cart"
    },
    {
      "id": "conn_7",
      "from": "block_6",
      "to": "block_2",
      "fromPort": "back_to_catalog"
    },
    {
      "id": "conn_8",
      "from": "block_6",
      "to": "block_12",
      "fromPort": "go_to_checkout"
    },
    {
      "id": "conn_9",
      "from": "block_7",
      "to": "block_8",
      "fromPort": "default"
    },
    {
      "id": "conn_10",
      "from": "block_8",
      "to": "block_9",
      "fromPort": "default"
    },
    {
      "id": "conn_11",
      "from": "block_9",
      "to": "block_10",
      "fromPort": "default"
    },
    {
      "id": "conn_12",
      "from": "block_10",
      "to": "block_2",
      "fromPort": "continue_shopping"
    },
    {
      "id": "conn_13",
      "from": "block_10",
      "to": "block_12",
      "fromPort": "checkout"
    },
    {
      "id": "conn_14",
      "from": "block_10",
      "to": "block_11",
      "fromPort": "clear_cart"
    },
    {
      "id": "conn_15",
      "from": "block_11",
      "to": "block_2",
      "fromPort": "default"
    },
    {
      "id": "conn_16",
      "from": "block_12",
      "to": "block_11",
      "fromPort": "default"
    },
    {
      "id": "conn_17",
      "from": "block_11",
      "to": "block_12",
      "fromPort": "default"
    },
    {
      "id": "conn_18",
      "from": "block_12",
      "to": "block_13",
      "fromPort": "default"
    },
    {
      "id": "conn_19",
      "from": "block_13",
      "to": "block_14",
      "fromPort": "default"
    },
    {
      "id": "conn_20",
      "from": "block_14",
      "to": "block_15",
      "fromPort": "default"
    },
    {
      "id": "conn_21",
      "from": "block_15",
      "to": "block_16",
      "fromPort": "confirm_order"
    },
    {
      "id": "conn_22",
      "from": "block_15",
      "to": "block_11",
      "fromPort": "edit_order"
    },
    {
      "id": "conn_23",
      "from": "block_16",
      "to": "block_17",
      "fromPort": "default"
    },
    {
      "id": "conn_24",
      "from": "block_17",
      "to": "block_18",
      "fromPort": "default"
    },
    {
      "id": "conn_25",
      "from": "block_18",
      "to": "block_19",
      "fromPort": "default"
    }
  ],
  "blockCounter": 21,
  "settings": {
    "botName": "–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω",
    "botToken": ""
  }
}
